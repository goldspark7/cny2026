<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 ä¸™åˆé©¬å¹´ - çƒŸèŠ±å…¨ç³»åˆ—ç›®å½•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #b91c1c; 
            background-image: radial-gradient(circle at 2px 2px, rgba(255,255,255,0.05) 1px, transparent 0);
            background-size: 40px 40px;
        }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .animate-slide-up { animation: slideUp 0.3s ease-out; }
        
        .product-card:active { transform: scale(0.98); }
        .category-btn.active { 
            background-color: #facc15; 
            color: #b91c1c;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .sold-out-overlay {
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(2px);
        }
    </style>
</head>
<body class="text-white pb-24">

    <!-- é¡¶éƒ¨ä»£ç†ä¿¡æ¯æ  -->
    <div id="agent-banner" class="bg-yellow-500 text-red-900 text-center py-1 text-[10px] font-black uppercase tracking-widest">
        æ­£åœ¨ä¸ºæ‚¨è¿æ¥ä¸“å±é¡¾é—®: <span id="display-agent-name">å®˜æ–¹å®¢æœ</span>
    </div>

    <!-- å¯¼èˆªæ  -->
    <nav class="sticky top-0 z-50 bg-red-800/95 backdrop-blur-md border-b border-yellow-500/30 px-4 py-3 flex justify-between items-center shadow-xl">
        <div class="flex flex-col">
            <span class="font-black text-lg text-yellow-400 leading-none">2026 ä¸™åˆé©¬å¹´</span>
            <span class="text-[9px] text-yellow-200/70 mt-1 uppercase tracking-tighter">Fireworks Catalogue</span>
        </div>
        <button onclick="toggleCart()" class="relative p-2 bg-yellow-500 text-red-900 rounded-full shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
            <span id="cart-count" class="absolute -top-1 -right-1 bg-white text-red-600 text-[10px] font-black px-1.5 py-0.5 rounded-full border border-red-600">0</span>
        </button>
    </nav>

    <!-- å¤´éƒ¨å…¬å‘Š -->
    <header class="py-8 px-4 text-center">
        <h1 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-b from-yellow-100 to-yellow-500 mb-1">
            æ–°æ˜¥çƒŸèŠ±å¤§å…¨
        </h1>
        <p class="text-yellow-100/60 text-xs italic">å…¨ç³»åˆ—çˆ†æ¬¾ Â· ç°è´§ä¾›åº” Â· ä¸¥é€‰å“è´¨</p>
    </header>

    <!-- åˆ†ç±»ç­›é€‰å™¨ -->
    <div class="sticky top-[60px] z-40 bg-red-900/80 backdrop-blur-sm py-3 mb-4">
        <div class="flex gap-2 overflow-x-auto px-4 hide-scrollbar" id="category-list">
            <button onclick="filterProducts('all')" class="category-btn active whitespace-nowrap px-4 py-1.5 rounded-full text-xs font-black border border-yellow-500/30 transition-all">å…¨éƒ¨</button>
            <button onclick="filterProducts('æ‰‹æŒç³»åˆ—')" class="category-btn whitespace-nowrap px-4 py-1.5 rounded-full text-xs font-black border border-yellow-500/30 transition-all">ğŸª„ æ‰‹æŒç³»åˆ—</button>
            <button onclick="filterProducts('èŠ±ç­’ç³»åˆ—')" class="category-btn whitespace-nowrap px-4 py-1.5 rounded-full text-xs font-black border border-yellow-500/30 transition-all">âœ¨ èŠ±ç­’ç³»åˆ—</button>
            <button onclick="filterProducts('ç©å…·çƒŸèŠ±ç³»åˆ—')" class="category-btn whitespace-nowrap px-4 py-1.5 rounded-full text-xs font-black border border-yellow-500/30 transition-all">ğŸ¤¡ ç©å…·ç³»åˆ—</button>
            <button onclick="filterProducts('ä¼ ç»Ÿé­ç‚®')" class="category-btn whitespace-nowrap px-4 py-1.5 rounded-full text-xs font-black border border-yellow-500/30 transition-all">ğŸ§¨ ä¼ ç»Ÿé­ç‚®</button>
            <button onclick="filterProducts('å•å‘ç³»åˆ—')" class="category-btn whitespace-nowrap px-4 py-1.5 rounded-full text-xs font-black border border-yellow-500/30 transition-all">ğŸš€ å•å‘ç³»åˆ—</button>
            <button onclick="filterProducts('åç /ç«ç®­ç³»åˆ—')" class="category-btn whitespace-nowrap px-4 py-1.5 rounded-full text-xs font-black border border-yellow-500/30 transition-all">â˜„ï¸ åç ç«ç®­</button>
            <button onclick="filterProducts('ç›†èŠ±/å¤§ç»„åˆ')" class="category-btn whitespace-nowrap px-4 py-1.5 rounded-full text-xs font-black border border-yellow-500/30 transition-all">ğŸ† ç›†èŠ±ç»„åˆ</button>
        </div>
    </div>

    <!-- äº§å“ç½‘æ ¼ -->
    <main class="container mx-auto px-3 pb-12">
        <div id="product-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 md:gap-6">
            <!-- æ¸²æŸ“å†…å®¹ -->
        </div>
    </main>

    <!-- å›¾ç‰‡/è§†é¢‘å¼¹çª— -->
    <div id="image-lightbox" class="fixed inset-0 z-[100] bg-black/95 hidden items-center justify-center p-4" onclick="closeLightbox()">
        <img id="lightbox-img" src="" class="max-w-full max-h-[85vh] rounded-lg shadow-2xl">
    </div>

    <div id="video-lightbox" class="fixed inset-0 z-[100] bg-black/95 hidden items-center justify-center p-4" onclick="closeVideo()">
        <div class="relative w-full max-w-2xl aspect-video bg-black rounded-2xl overflow-hidden shadow-2xl" onclick="event.stopPropagation()">
            <video id="product-video" controls playsinline class="w-full h-full"></video>
            <button class="absolute top-3 right-3 bg-black/50 text-white w-8 h-8 rounded-full text-xl" onclick="closeVideo()">&times;</button>
        </div>
    </div>

    <!-- è´­ç‰©è½¦æŠ½å±‰ -->
    <div id="cart-modal" class="fixed inset-0 z-[60] bg-black/80 hidden items-end justify-center">
        <div class="bg-white text-gray-800 w-full max-w-lg rounded-t-3xl overflow-hidden shadow-2xl animate-slide-up">
            <div class="bg-red-700 p-5 text-white flex justify-between items-center">
                <div>
                    <h2 class="text-lg font-black italic">æˆ‘çš„ä¸‹å•æ¸…å•</h2>
                    <p class="text-[10px] text-yellow-300 italic">ä¸“å±é¡¾é—®: <span id="cart-agent-name">å®˜æ–¹</span></p>
                </div>
                <div class="flex items-center gap-4">
                    <button onclick="clearCart()" class="text-white/60 hover:text-white text-[10px] font-bold border border-white/20 px-2 py-1 rounded">æ¸…ç©ºæ¸…å•</button>
                    <button onclick="toggleCart()" class="text-white/60 hover:text-white text-3xl">&times;</button>
                </div>
            </div>
            <div id="cart-items" class="max-h-[50vh] overflow-y-auto p-5 space-y-4"></div>
            <div class="p-5 border-t border-gray-100 bg-gray-50">
                <div class="flex justify-between items-center mb-5 px-1">
                    <span class="text-gray-400 font-bold">é¢„è®¡æ€»é¢:</span>
                    <span id="cart-total-price" class="text-2xl font-black text-red-600 tracking-tighter">RM 0.00</span>
                </div>
                <button onclick="checkout()" class="w-full bg-[#25D366] text-white py-4 rounded-xl font-black text-lg shadow-lg flex items-center justify-center gap-2 active:scale-95 transition-transform">
                    ç¡®è®¤å¹¶å‘é€ WhatsApp è®¢å•
                </button>
            </div>
        </div>
    </div>

    <script>
        const agents = {
            'ag1': { name: '', phone: '60129985953' },
            'ag2': { name: '', phone: '60129283393' },
            'a3k5': { name: '', phone: '60147093773' },
            'hq': { name: 'å®˜æ–¹å®¢æœ', phone: '60129540804' }
        };

        const urlParams = new URLSearchParams(window.location.search);
        const agentId = urlParams.get('id') || 'hq';
        const currentAgent = agents[agentId] || agents['hq'];
        document.getElementById('display-agent-name').innerText = currentAgent.name;
        document.getElementById('cart-agent-name').innerText = currentAgent.name;

        // äº§å“æ•°æ®åº“
        const products = [
            { id: 'PM11N', name: 'å°éœå…‰', spec: '1 BOX 100 PCS', price: 16.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },
            { id: 'PM22N', name: '7" ç”µå…‰èŠ±', spec: '1 BOX 30 PACK (8PCS)', price: 24.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },
            { id: 'PM33N', name: 'å°å®‰å…¨', spec: '1 BOX 200 PCS', price: 10.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },
            { id: '33', name: 'å¤œç©ºä¹‹æ˜Ÿ', spec: '1 BOX 6 PCS', price: 5.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },
            { id: '33N', name: 'å½©è‰²æ£’', spec: '1 BOX 50 PCS', price: 10.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },
            { id: 'PM2525N', name: '18å¯¸é‡‘è‰²ç”µå…‰èŠ±', spec: '1 BOX 10 PACK (6 PCS)', price: 20.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },
            { id: '2525', name: '18å¯¸å¿«ä¹å°ç¥é­', spec: '1 BOX 10 PACK (6 PCS)', price: 20.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },
            { id: 'PM3636N', name: '14å¯¸ç”µå…‰èŠ±', spec: '1 BOX 10 PACK (8 PCS)', price: 20.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },
            { id: 'PM3939N', name: 'å¤§å·éœå…‰', spec: '1 BOX 100 PCS', price: 20.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },
            { id: 'JL11_4', name: 'å››è‰²èŠ±', spec: '1 BOX 120 PCS', price: 18.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },
            { id: 'JL9966_K', name: 'é£è½¦', spec: '1 BOX 2 PCS', price: 48.00, category: 'æ‰‹æŒç³»åˆ—', isSoldOut: false },

            { id: 'PM44N', name: '7" é›ªç³•', spec: '1 BOX 2 PCS', price: 22.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'PM4848N', name: '15å¯¸é›ªç³•', spec: '1 BOX 2 PCS', price: 88.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'PM66N', name: 'æ˜¥å¤©èŠ­è•¾', spec: '1 BOX 2 PCS', price: 15.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: '88', name: 'æ¬¢ä¹èŠ±ä»™', spec: '1 PCS', price: 15.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'PM5757', name: 'æ˜Ÿå¤œå½©è™¹', spec: '1 PCS', price: 24.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'JL988_FCS', name: 'å‘è´¢æ ‘', spec: '1 PACK 6 PCS', price: 15.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'JL988_MT', name: 'é‡‘é’±æ ‘', spec: '1 PACK 4 PCS', price: 15.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'JL988', name: 'æ–¹æ–¹å¾—åˆ©', spec: '1 PCS', price: 18.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'JL9955', name: 'å­”é›€å¼€å±', spec: '1 PCS', price: 25.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'JL5599', name: 'é£å¤©é¼ ', spec: '1 PACK 2 PCS', price: 18.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'JL988_MD', name: 'æ»¡åœ°çç ', spec: '1 BOX 10 PCS', price: 15.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'JL988_HX', name: 'å‡Œå…‰å…­è€€', spec: '1 PCS', price: 15.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'JL9911', name: '3å¯¸é›ªç³•', spec: '1 BOX 6 PCS', price: 15.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },
            { id: 'JL9922', name: '10å¯¸é›ªç³•', spec: '1 BOX 2 PCS', price: 50.00, category: 'èŠ±ç­’ç³»åˆ—', isSoldOut: false },

            { id: 'PM77N', name: 'ç‚¸ç å¤§åœ°å¼€èŠ±', spec: '1 BOX 30 PCS', price: 20.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'PM99N', name: 'è²èŠ±å¼€', spec: '1 BOX 12 PCS', price: 20.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'PM1010N', name: 'èŒ¶èŠ±é¦™', spec: '1 BOX 12 PACK (12 PCS)', price: 20.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'PM1212N', name: 'é¾™è›‹', spec: '1 BOX 12 PACK (12 PCS)', price: 15.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'PM1212_B', name: 'å¤§é¾™è›‹', spec: '1 BOX 24 PACK (6 PCS)', price: 20.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'PM2828N', name: 'å°é»„èœ‚', spec: '1 BOX 12PCS', price: 4.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'PM3030N', name: 'å¤ªç©ºé£ç¢Ÿ', spec: '1 BOX 12 PCS', price: 20.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: '3030', name: 'æ°´æ¯å¥‡ç¼˜', spec: '1 PACK 8 PCS', price: 20.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'PM3232N', name: 'é‡‘ç‰æ»¡å ‚', spec: '1 BOX 6 PCS', price: 15.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'JL9500', name: 'å½©è‰²ç ‚ç‚®', spec: '1 BOX 50 PACK (35 PCS)', price: 25.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'JL9500_B', name: 'å¤§å½©è‰²ç ‚ç‚®', spec: '1 BOX 40 PACK (20 PCS)', price: 35.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'JL9500_T', name: 'é›·éœ†ç ‚ç‚®', spec: '1 BOX 12 PACK (20 PCS)', price: 25.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },
            { id: 'JL88_B', name: 'å¤§å·é‡‘ç‰æ»¡å ‚', spec: '1 BOX 4 PCS', price: 25.00, category: 'ç©å…·çƒŸèŠ±ç³»åˆ—', isSoldOut: false },

            { id: 'PM1313N', name: '8å°ºçº¢ç‚®(å¸¦èƒ†)', spec: '1 PACK', price: 8.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: '1313', name: '8å°ºç«ç‘°çº¢ç‚®(å¸¦èƒ†)', spec: '1 PACK', price: 16.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: '50K', name: '50000çº¢ç‚®', spec: '1 BOX', price: 160.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: 'PM3434N', name: 'ç«æŸ´ç‚®', spec: '1 BOX 60 PCS', price: 18.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: 'PM3838N', name: 'é¡ºåˆ©çº¢', spec: '1 BOX 10 PCS', price: 4.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: 'JL1222', name: '88å°ºå½©å…‰æ»¡åœ°ç«ç‘°', spec: '1 BOX', price: 168.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: 'JL1223', name: '88å°ºå½©å…‰æ»¡åœ°é»„é‡‘', spec: '1 BOX', price: 168.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: 'JL1224', name: '88å°ºå½©å…‰çº¢è‰²åœ°æ¯¯', spec: '1 BOX', price: 150.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: 'JL1225', name: '38å°ºå½©å…‰æ»¡åœ°ç«ç‘° (å¸¦èƒ†)', spec: '1 BOX', price: 110.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: 'JL1226', name: '38å°ºå½©å…‰æ»¡åœ°é»„é‡‘ (å¸¦èƒ†)', spec: '1 BOX', price: 110.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: 'JL1227', name: '38å°ºå½©å…‰çº¢ç„°é£æš´ (å¸¦èƒ†)', spec: '1 BOX', price: 100.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },
            { id: 'JL1228', name: '38å°ºå½©å…‰ä¸‰è‰²æµå…‰', spec: '1 BOX', price: 128.00, category: 'ä¼ ç»Ÿé­ç‚®', isSoldOut: false },

            { id: '4040', name: '3å‘é›¨æ‰“èŠ­è•‰', spec: '1 BOX 3 PCS', price: 40.00, category: 'å•å‘ç³»åˆ—', isSoldOut: false },
            { id: 'JL9559_W', name: 'ç‹¼åšé›¨æ‰“èŠ­è•‰', spec: '1 BOX 6 PCS', price: 35.00, category: 'å•å‘ç³»åˆ—', isSoldOut: false },
            { id: 'JL9559', name: 'æ··åˆé›¨æ‰“èŠ­è•‰ (1.5")', spec: '1 BOX 6 PCS', price: 35.00, category: 'å•å‘ç³»åˆ—', isSoldOut: false },
            { id: 'JL9559_2', name: 'é‡‘é’›æŸ³é›¨æ‰“èŠ­è•‰ (1.8")', spec: '1 BOX 6 PCS', price: 40.00, category: 'å•å‘ç³»åˆ—', isSoldOut: false },
            { id: 'JL5995', name: 'æ··åˆé›¨æ‰“èŠ­è•‰ (å°å·)', spec: '1 BOX 6 PCS', price: 15.00, category: 'å•å‘ç³»åˆ—', isSoldOut: false },

            { id: 'PM4444N', name: '10æ³¢éœ¹é›³é›¨', spec: '1 PACK 6 PCS', price: 18.00, category: 'åç /ç«ç®­ç³»åˆ—', isSoldOut: false },
            { id: 'PM3737N', name: 'ç‚¸ç å“å¤©é›·', spec: '1 BOX 20 PACK (3 PCS)', price: 30.00, category: 'åç /ç«ç®­ç³»åˆ—', isSoldOut: false },
            { id: '3737', name: 'ç‹¼åšç«ç®­', spec: '1 BOX 6 PCS', price: 35.00, category: 'åç /ç«ç®­ç³»åˆ—', isSoldOut: false },
            { id: 'PM4141N', name: 'å•¸å£°æœˆæ—…è¡Œ', spec: '1 BOX 12 PACK (12 PCS)', price: 25.00, category: 'åç /ç«ç®­ç³»åˆ—', isSoldOut: false },
            { id: 'JL933', name: '15æ³¢é­”æœ¯å¼¹', spec: '1 PACK 12 PCS', price: 12.00, category: 'åç /ç«ç®­ç³»åˆ—', isSoldOut: false },
            { id: 'JL966', name: '20æ³¢é­”æœ¯å¼¹', spec: '1 PACK 12 PCS', price: 16.00, category: 'åç /ç«ç®­ç³»åˆ—', isSoldOut: false },
            { id: 'JL977', name: '30æ³¢é­”æœ¯å¼¹', spec: '1 PACK 12 PCS', price: 22.00, category: 'åç /ç«ç®­ç³»åˆ—', isSoldOut: false },
            { id: 'JL944', name: '8æ³¢ç½—é©¬çƒ›å…‰', spec: '1 PACK 3 PCS', price: 24.00, category: 'åç /ç«ç®­ç³»åˆ—', isSoldOut: false },

            { id: 'PM1717N', name: '4å¯¸49å‘ç›†èŠ±', spec: '1 PCS', price: 50.00, category: 'ç›†èŠ±/å¤§ç»„åˆ', isSoldOut: false },
            { id: 'PM2424N', name: '4å¯¸36å‘ç›†èŠ±', spec: '1 PCS', price: 38.00, category: 'ç›†èŠ±/å¤§ç»„åˆ', isSoldOut: false },
            { id: '2424N', name: 'é—ªäº®ç¾äºº100å‘', spec: '1 PCS', price: 25.00, category: 'ç›†èŠ±/å¤§ç»„åˆ', isSoldOut: false },
            { id: 'PM4646N', name: '4å¯¸25å‘ç›†èŠ±', spec: '1 PCS', price: 28.00, category: 'ç›†èŠ±/å¤§ç»„åˆ', isSoldOut: false },
            { id: '4138', name: '4å¯¸138å‘ç»„åˆçƒŸèŠ±', spec: '1 PCS', price: 138.00, category: 'ç›†èŠ±/å¤§ç»„åˆ', isSoldOut: false },
            { id: '4168', name: '4å¯¸168å‘ç»„åˆçƒŸèŠ±', spec: '1 PCS', price: 168.00, category: 'ç›†èŠ±/å¤§ç»„åˆ', isSoldOut: false },
            { id: '4228', name: '4å¯¸228å‘ç»„åˆçƒŸèŠ±', spec: '1 PCS', price: 228.00, category: 'ç›†èŠ±/å¤§ç»„åˆ', isSoldOut: false },
            { id: 'JL9966_F', name: 'å›ä¸´æ˜Ÿç©º', spec: '1 PCS', price: 25.00, category: 'ç›†èŠ±/å¤§ç»„åˆ', isSoldOut: false }
        ];

        let cart = {};

        /**
         * è‡ªåŠ¨å¤„ç†å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ”¯æŒ JPG -> PNG -> å ä½å›¾ çš„å›é€€é€»è¾‘
         */
        function handleImageError(img, id) {
            if (img.src.includes('.jpg')) {
                // å¦‚æœ JPG å¤±è´¥ï¼Œå°è¯• PNG
                img.src = `images/${id}.png`;
            } else if (img.src.includes('.png')) {
                // å¦‚æœ PNG ä¹Ÿå¤±è´¥ï¼Œæ˜¾ç¤ºå¸¦æ–‡å­—çš„å ä½å›¾
                img.onerror = null;
                img.src = `https://placehold.co/400x400/800000/ffffff?text=${id}`;
            }
        }

        function renderProducts(catFilter = 'all') {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = '';
            const filtered = catFilter === 'all' ? products : products.filter(p => p.category === catFilter);

            filtered.forEach(p => {
                const pureId = p.id.replace('*', '');
                // åˆå§‹å°è¯•åŠ è½½ JPG
                const imgPath = `images/${pureId}.jpg`;
                const videoPath = `videos/${pureId}.mp4`;
                
                const card = document.createElement('div');
                card.className = `product-card bg-white rounded-xl overflow-hidden shadow-lg flex flex-col transition-all relative ${p.isSoldOut ? 'opacity-70 grayscale-[0.5]' : ''}`;
                
                card.innerHTML = `
                    <div class="aspect-square bg-gray-100 flex items-center justify-center relative overflow-hidden">
                        <img src="${imgPath}" 
                             onclick="${p.isSoldOut ? '' : `openLightbox(this.src)`}" 
                             class="w-full h-full object-cover ${p.isSoldOut ? 'cursor-default' : 'cursor-zoom-in'}" 
                             onerror="handleImageError(this, '${pureId}')">
                        
                        ${p.isSoldOut ? `
                            <div class="absolute inset-0 sold-out-overlay flex items-center justify-center z-10">
                                <span class="border-4 border-white text-white font-black text-xl px-4 py-1 rotate-[-15deg] uppercase tracking-widest shadow-2xl">SOLD OUT</span>
                            </div>
                        ` : ''}

                        <button onclick="openVideo('${videoPath}')" class="absolute bottom-2 right-2 bg-black/70 text-white p-2 rounded-full shadow-lg flex items-center gap-1 scale-90 active:scale-75 transition-transform">
                            <svg width="10" height="10" fill="currentColor" viewBox="0 0 16 16"><path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/></svg>
                            <span class="text-[8px] font-black pr-1">æ•ˆæœ</span>
                        </button>
                    </div>
                    <div class="p-2.5 flex-1">
                        <p class="text-red-700 font-black text-[10px] tracking-tighter">${p.id}</p>
                        <p class="text-gray-800 text-[11px] font-bold leading-tight h-7 line-clamp-2">${p.name}</p>
                        <p class="text-gray-400 text-[9px] mt-0.5 italic">${p.spec}</p>
                        <p class="text-yellow-600 font-black text-sm mt-1">RM ${p.price.toFixed(2)}</p>
                    </div>
                    <div class="p-2 pt-0">
                        <div class="flex items-center justify-between border rounded-lg h-7 mb-2 bg-gray-50 overflow-hidden ${p.isSoldOut ? 'opacity-30' : ''}">
                            <button ${p.isSoldOut ? 'disabled' : `onclick="changeQty('${p.id}', -1)"`} class="w-8 h-full font-bold text-gray-400 hover:bg-gray-200 transition-colors">-</button>
                            <input id="qty-${p.id}" type="number" value="1" min="1" readonly class="w-8 text-center text-[10px] font-black bg-transparent text-gray-800 focus:outline-none">
                            <button ${p.isSoldOut ? 'disabled' : `onclick="changeQty('${p.id}', 1)"`} class="w-8 h-full font-bold text-gray-400 hover:bg-gray-200 transition-colors">+</button>
                        </div>
                        <button ${p.isSoldOut ? 'disabled' : `onclick="addToCart('${p.id}')"`} class="w-full ${p.isSoldOut ? 'bg-gray-400' : 'bg-red-600 hover:bg-red-700'} text-white py-1.5 rounded-lg text-[10px] font-black active:scale-95 transition-all shadow-sm">
                            ${p.isSoldOut ? 'æš‚æ—¶ç¼ºè´§' : 'åŠ å…¥è®¢å•'}
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function changeQty(id, delta) {
            const input = document.getElementById(`qty-${id}`);
            input.value = Math.max(1, (parseInt(input.value) || 1) + delta);
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            if (!product || product.isSoldOut) return;

            const qtyInput = document.getElementById(`qty-${id}`);
            const qty = parseInt(qtyInput.value) || 1;

            if (cart[id]) {
                cart[id].qty += qty;
            } else {
                cart[id] = { 
                    name: product.name, 
                    price: product.price, 
                    qty: qty 
                };
            }
            
            qtyInput.value = 1;
            updateCartStats();
            renderCartItems();
        }

        function clearCart() {
            if (Object.keys(cart).length === 0) return;
            cart = {};
            updateCartStats();
            renderCartItems();
        }

        function updateCartStats() {
            const count = Object.values(cart).reduce((a, b) => a + b.qty, 0);
            const total = Object.values(cart).reduce((a, b) => a + (b.qty * b.price), 0);
            document.getElementById('cart-count').innerText = count;
            document.getElementById('cart-total-price').innerText = `RM ${total.toFixed(2)}`;
        }

        function renderCartItems() {
            const container = document.getElementById('cart-items');
            const keys = Object.keys(cart);
            if (keys.length === 0) {
                container.innerHTML = '<div class="text-center py-10 text-gray-300 font-bold">å°šæœªæ·»åŠ ä»»ä½•æ¸…å•</div>';
                return;
            }
            container.innerHTML = keys.map(id => `
                <div class="flex justify-between items-center border-b pb-3 border-gray-100">
                    <div class="flex-1 text-left">
                        <span class="text-red-600 font-black text-[10px]">[${id}]</span>
                        <h4 class="text-[11px] font-bold text-gray-700">${cart[id].name}</h4>
                        <p class="text-[10px] text-gray-400 font-bold">RM ${cart[id].price.toFixed(2)} x ${cart[id].qty}</p>
                    </div>
                    <button onclick="deleteFromCart('${id}')" class="text-red-300 px-2 text-xl hover:text-red-600 transition-colors">&times;</button>
                </div>
            `).join('');
        }

        function deleteFromCart(id) {
            delete cart[id];
            updateCartStats();
            renderCartItems();
        }

        function filterProducts(cat) {
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            renderProducts(cat);
        }

        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            modal.classList.toggle('hidden');
            modal.classList.toggle('flex');
        }

        function openLightbox(src) {
            document.getElementById('lightbox-img').src = src;
            document.getElementById('image-lightbox').classList.replace('hidden', 'flex');
        }
        function closeLightbox() { document.getElementById('image-lightbox').classList.replace('flex', 'hidden'); }

        function openVideo(src) {
            const v = document.getElementById('product-video');
            v.src = src;
            document.getElementById('video-lightbox').classList.replace('hidden', 'flex');
            v.play();
        }
        function closeVideo() {
            const v = document.getElementById('product-video');
            v.pause();
            v.src = "";
            document.getElementById('video-lightbox').classList.replace('flex', 'hidden');
        }

        function checkout() {
            if (Object.keys(cart).length === 0) return;
            let total = 0;
            let msg = `ğŸ® *2026 é©¬å¹´çƒŸèŠ±è®¢å•* ğŸ®\n`;
            msg += `ğŸ™‹â€â™‚ï¸  ${currentAgent.name}\n`;
            msg += `----------------------------\n`;
            Object.keys(cart).forEach((id, i) => {
                const item = cart[id];
                const sub = item.price * item.qty;
                total += sub;
                msg += `${i+1}. *[${id}]* ${item.name}\n   ğŸ‘‰ RM ${item.price.toFixed(2)} x ${item.qty} = *RM ${sub.toFixed(2)}*\n`;
            });
            msg += `----------------------------\n`;
            msg += `ğŸ’° *åˆè®¡æ€»é¢: RM ${total.toFixed(2)}*\n`;
            msg += `----------------------------\n`;
            msg += `ç¥æ‚¨é©¬åˆ°æˆåŠŸï¼Œä¸‡äº‹å¦‚æ„ï¼ğŸ`;
            window.open(`https://wa.me/${currentAgent.phone}?text=${encodeURIComponent(msg)}`, '_blank');
        }

        window.onload = () => renderProducts();
    </script>
</body>
</html>




